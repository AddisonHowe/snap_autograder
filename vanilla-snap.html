<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Snap! Build Your Own Blocks. Beta</title>
        <link rel="shortcut icon" href="http://snap.berkeley.edu/fav3.gif" type="image/gif">
        
        <script type="text/javascript" src="snap.js"></script>
        <script type="text/javascript" src="snapPLE.js"></script>
        

        <script type="text/javascript">

            //recover stored save
            //var worldXML = localStorage.getItem("worldState");
            var world;
            var spriteList = null;
            var spriteEvents = new SpriteEventLog();

            //var pageXML = localStorage.getItem(id)
            
            window.onload = function () {
                world = new WorldMorph(document.getElementById('world'));
                new IDE_Morph().openIn(world);

                //Reduce Stage Size on initialization
                var ide = world.children[0];
                ide.toggleStageSize(true);
                
                //If this page has already been loaded
                // if (localStorage.getItem(id) !== null) {
                //     ide.openProjectString(pageXML);
                // }

                setInterval(loop, 1);
                
            };

            function eventListen() {
                spriteList = world.children[0].sprites.contents;
                for (var i = 0; i < spriteList.length; i++) {
                    spriteEvents.addEvent(spriteList[i], i);
                }
            }

            function loop() {
                world.doOneCycle();
                eventListen();
            }

        </script>
    </head>
    <body style="margin: 0;">
        <canvas id="world" tabindex="1" style="position: absolute;" />
    </body>
</html>
